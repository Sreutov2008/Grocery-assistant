### Проект Foodgram

**Foodgram** - продуктовый помощник.

[![Django-app workflow](https://github.com/sreutov2008/foodgram-project-react/actions/workflows/main.yml/badge.svg)](https://github.com/sreutov2008/foodgram-project-react/actions/workflows/main.yml)

Пользователи **Foodgram** могут публиковать рецепты (**Recipes**), подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список «Избранное», а перед походом в магазин скачивать в формате .txt сводный список продуктов (**Ingredients**), необходимых для приготовления одного или нескольких выбранных блюд.

Для удобства навигации по сайту рецепты размечены тэгами (**Tags**)

- Склонируйте проект из репозитория:

```sh
$ git clone https://github.com/Mukhinart/foodgram-project-react.git
```

- Выполните вход на удаленный сервер

- Установите DOCKER на сервер:
```sh
apt install docker.io 
```

- Установитe docker-compose на сервер:
```sh
curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```

- Отредактируйте конфигурацию сервера NGNIX:
```sh
Локально измените файл ..infra/nginx.conf - замените данные в строке server_name на IP-адрес удаленного сервера
```

- Скопируйте файлы docker-compose.yml и nginx.conf из директории ../infra/ на удаленный сервер:
```sh
scp docker-compose.yml <username>@<host>:/home/<username>/docker-compose.yaml
scp nginx.conf <username>@<host>:/home/<username>/nginx.conf
```
- Создайте переменные окружения (указаны в файле ../infra/env.example) и добавьте их в Secrets GitHub Actions

- Установите и активируйте виртуальное окружение (для Windows):

```sh
python -m venv venv 
source venv/Scripts/activate
python -m pip install --upgrade pip
``` 

- Запустите приложение в контейнерах:

```sh
docker-compose up -d --build
```

- Выполните миграции:

```sh
docker-compose exec backend python manage.py migrate
```

- Создайте суперпользователя:

```sh
docker-compose exec backend python manage.py createsuperuser
```

- Выполните команду для сбора статики:

```sh
docker-compose exec backend python manage.py collectstatic --no-input
```

- Команда для заполнения тестовыми данными:
```sh
docker-compose exec backend python manage.py load_ingredients
```

- Команда для остановки приложения в контейнерах:

```sh
docker-compose down -v
```

### Для запуска на локальной машине:

- Склонируйте проект из репозитория:

```sh
$ git clone https://github.com/sreutov2008/foodgram-project-react.git
```

- В папке ../infra/ создайте файл .env и заполните своими данными:
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
SECRET_KEY=<...> # секретный ключ django-проекта из settings.py
```

- Создайте и запустите контейнеры Docker (по инструкции выше).

После запуска проект будут доступен по адресу: [http://localhost/](http://localhost/)

Документация будет доступна по адресу: [http://localhost/api/docs/](http://localhost/api/docs/)

### Особенности заполнения данными:

- Добавьте теги для для рецептов через админ-панель проекта [http://localhost/admin/](http://localhost/admin/), т.к. это поле является обязательным для сохранения рецепта и добавляется только админом.

***

# Ресурсы API Foodgram

**AUTH**: получение/удаление токена авторизации.

**USERS**: пользователи: регистрация, просмотр/изменение личного профиля, просмотр пользовательских профилей, подписка/отписка на пользователей.

**TAGS**: теги категории рецептов (создаются и редактируюся пользователями с правами администратора). Описывается полями:
```sh
- Название.
- Цветовой HEX-код (например, #49B64E).
- Slug.
```

**RECIPES**: рецепты. У каждого авторизованного пользователя есть возможность добавлять рецепт в "Избранное" и в "Список покупок".
Каждый рецепт содержит следующие поля:
```sh
- Автор публикации (пользователь).
- Название.
- Картинка.
- Текстовое описание.
- Ингредиенты: продукты для приготовления блюда по рецепту. Множественное поле, выбор из предустановленного списка, с указанием количества и единицы измерения.
- Тег (можно установить несколько тегов на один рецепт, выбор из предустановленных).
- Время приготовления в минутах.
```

**INGREDIENTS**: ингредиенты.
Поля:
```sh
- Название.
- Количество.
- Единицы измерения.
```

# Пользовательские роли

**Права анонимного пользователя:**
- Создание аккаунта.
- Просмотр: рецепты на главной, отдельные страницы рецептов, страницы пользователей.
- Фильтрация рецептов по тегам.

**Права авторизованного пользователя (USER):**
- Входить в систему под своим логином и паролем.
- Выходить из системы (разлогиниваться).
- Менять свой пароль.
- Создавать/редактировать/удалять собственные рецепты
- Просматривать рецепты на главной.
- Просматривать страницы пользователей.
- Просматривать отдельные страницы рецептов.
- Фильтровать рецепты по тегам.
- Работать с персональным списком избранного: добавлять в него рецепты или удалять их, просматривать свою страницу избранных рецептов.
- Работать с персональным списком покупок: добавлять/удалять любые рецепты, выгружать файл со количеством необходимых ингридиентов для рецептов из списка покупок.
- Подписываться на публикации авторов рецептов и отменять подписку, просматривать свою страницу подписок.

**Права администратора (ADMIN):**
Все права авторизованного пользователя +
- Изменение пароля любого пользователя,
- Создание/блокирование/удаление аккаунтов пользователей,
- Редактирование/удаление любых рецептов,
- Добавление/удаление/редактирование ингредиентов.
- Добавление/удаление/редактирование тегов.

**Администратор Django** — те же права, что и у роли Администратор.




После запуска проект будут доступен по адресу: [http://localhost/](http://localhost/)

Документация будет доступна по адресу: [http://localhost/api/docs/](http://localhost/api/docs/)

***

Проект развернут по IP [158.160.15.96](http:/158.160.15.96/)

Доступ в админ-панель:

```sh
http://178.154.203.148/admin
login: admin (admin@food.food)
pass: admin123
```

### Автор

Реутов Александр